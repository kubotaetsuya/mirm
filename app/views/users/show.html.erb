<header>
  <div class="container">
    <%= link_to image_tag('MIRMlogo.png' , size: '100x100'), "/" %>
    <div class="title">MIRM
    </div>
    <div class="search">
    検索フォーム
    </div>
    <div class="header_nav">
      <% if user_signed_in? %>
      <ul>
        <li><%= link_to '投稿', new_post_path, class: "post_btn" %></li>
        <li> <%= link_to "マイページ", "/users/#{current_user.id}" %></li>
        <li><%= link_to "ログアウト", destroy_user_session_path,class: "sign-up", method: :delete %></li>

      </ul>
      <% else %>
      <ul>
        <li><%= link_to '新規登録', new_user_registration_path, class: "sign_up" %></li>
        <li><%= link_to 'ログイン', new_user_session_path, class: "login" %></li>
      </ul>
      <% end %>
    </div>
  </div>
</header>

  <div classs="container-fluid">
    <%# ユーザー情報 %>
    <div class="row">
        <%# ユーザー画像 %>
      <div class="col-4 pt-2 d-flex justify-content-end ">
        <% if @user.avatar.attached? %>
          <%= image_tag @user.avatar.variant(resize: '100x100'), class: "my_page_avatar"%>
        <% else %>
          <%# 画像がない時のサンプルデータ %>
        <%= image_tag "sample.png", :size =>'100x100', class: "my_page_avatar"%>
        <% end %>
      </div>
        <%# ユーザーネームと自己紹介 %>
      <div class="col-6 pt-4 pl-5">
        <h4 class="text-left font-weight-bolder pb-2">
          <%= @user.name %>
        </h4>
        <% if @user.description == nil %>
          <%# 自己紹介のサンプルデータ %>
        <p class="text-left">ユーザー編集で自己紹介文を入力してください</p>
        <% else %>
          <%= @user.description %>
        <% end %>
      </div>
    </div>

<div class="outline">
  <div class="container-lg d-flex justify-content-center">
      <%# マイページの投稿一覧 %>
    <div class="row mt-4 mb-5">
      <div class="col-md-">
        <% @post.each do |my_post| %>
          <%# 投稿詳細ページにリンク %>
          <div class="card mb-3" style="width: 50rem;">
            <%= link_to post_path(my_post.id) do %>
              <%# 投稿イメージ画像 %>
              <%= image_tag my_post.image.variant(resize: '500x500'), class: 'img-thumbnail rounded mx-auto d-block mt-5' %>
            <% end %>
              <%# 投稿内容 %>
            <div class="card-body mx-5">
              <h4 class="d-flex justify-content-center pt-3 pb-4">
                <%= my_post.title %>
              </h4>
                <%# 表示する文字数を制限 %>
              <div class="col-sm">
                <p class="my_page_post_text">
                  <%= truncate(my_post.text, length: 300) %>
                </p>
              </div>
              <p class="my_page_tag">
                <%= link_to "記事を見る", post_path(my_post.id), class: "view_article" %>
              </p>
                <%# 関連タグ %>
              <div class="row">
                <div class="col ml-5">
                  <% my_post.tags.each do |tag| %>
                  <button type="button" class="btn btn-outline-light text-black-50 my-1 mx-1"><%= tag.name %></button>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>